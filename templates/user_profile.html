{% extends 'base.html' %}

{% block content %}
  <div class="profile-container">
    <div class="profile-title">
      <h3>
        {% if current_user.is_authenticated and current_user.id == user['name'] %}
          My Profile
        {% else %}
          {{ user['name'] }}'s Profile
        {% endif %}
      </h3>
    </div>

    <div class="profile-actions">
      <div class="profile-actions-bar">
        <a href="{{ url_for('user_movies', user_id=user['name']) }}">My Movie List</a>
        <a href="{{ url_for('user_watchlist', user_id=user['name']) }}">Watchlist</a>
      </div>
    </div>

    {% if profile_picture %}
      <img class="profile-picture" src="{{ profile_picture }}" alt="Profile picture">
    {% else %}
      <div class="broken-image-icon"></div>
    {% endif %}

    <div class="profile-info">
      <div class="profile-details">
        <div class="profile-detail">
          <div class="detail-label">Name</div>
          <div class="detail-value">{{ user['name'] }}</div>
        </div>
        <div class="profile-detail">
          <div class="detail-label">Age</div>
          <div class="detail-value">{{ user['age'] or 'N/A' }}</div>
        </div>
        <div class="profile-detail">
          <div class="detail-label">Gender</div>
          <div class="detail-value">{{ user['sex'] or 'N/A' }}</div>
        </div>
        <div class="profile-detail">
          <div class="detail-label">Words to live by</div>
          <div class="detail-value">{{ user['words_to_live_by'] or 'N/A' }}</div>
        </div>
        <div class="profile-detail">
          <div class="detail-label">Favorite Movie</div>
          <div class="detail-value">{{ user['favorite_movie'] or 'N/A' }}</div>
        </div>
        <div class="profile-detail">
          <div class="detail-label">Favorite Quote</div>
          <div class="detail-value">{{ user['favorite_quote'] or 'N/A' }}</div>
        </div>
      </div>
    </div>

    {% if current_user.is_authenticated and current_user.id == user['name'] %}
      <div class="update-delete-actions">
        <a href="{{ url_for('update_profile', user_id=user['name']) }}" class="button">Update Profile</a>

        <form method="POST" action="{{ url_for('delete_account', user_id=user['name']) }}">
          <input type="submit" value="Delete Account" onclick="return confirm('Are you sure you want to delete your account? This action cannot be undone.')">
        </form>
      </div>
    {% endif %}
  </div>
{% endblock %}